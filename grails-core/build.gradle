configurations {
    agent.extendsFrom compile
}
dependencies {
    runtime 'oro:oro:2.0.8'
    agent 'com.springsource.springloaded:springloaded-core:0.8.0.BUILD-SNAPSHOT'
    compile project(":grails-bootstrap"), project(":grails-spring")
}

sourceSets {
    main {
        compileClasspath = files(configurations.agent)
    }
}

compileGroovy.doFirst {
    delete("${buildDir}/classes/main/META-INF")
    ant.mkdir(dir:sourceSets.main.classesDir)
    ant.propertyfile(file:"${sourceSets.main.classesDir}/grails.build.properties") {
         entry key:"grails.version", value:version
    }
}

jar.appendix = 'core'